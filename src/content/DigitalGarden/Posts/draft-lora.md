---
title:  "LoRA" 
permalink: lora/
layout: post
draft: true 
tags: 
  - posts
  - programming
---

## Photo prism

MariaDB [photoprism]> describe markers;
+-----------------+----------------+------+-----+---------+-------+
| Field           | Type           | Null | Key | Default | Extra |
+-----------------+----------------+------+-----+---------+-------+
| marker_uid      | varbinary(42)  | NO   | PRI | NULL    |       |
| file_uid        | varbinary(42)  | YES  | MUL |         |       |
| marker_type     | varbinary(8)   | YES  |     |         |       |
| marker_src      | varbinary(8)   | YES  |     |         |       |
| marker_name     | varchar(160)   | YES  |     | NULL    |       |
| marker_review   | tinyint(1)     | YES  |     | NULL    |       |
| marker_invalid  | tinyint(1)     | YES  |     | NULL    |       |
| subj_uid        | varbinary(42)  | YES  | MUL | NULL    |       |
| subj_src        | varbinary(8)   | YES  |     |         |       |
| face_id         | varbinary(42)  | YES  | MUL | NULL    |       |
| face_dist       | double         | YES  |     | -1      |       |
| embeddings_json | mediumblob     | YES  |     | NULL    |       |
| landmarks_json  | mediumblob     | YES  |     | NULL    |       |
| x               | float          | YES  |     | NULL    |       |
| y               | float          | YES  |     | NULL    |       |
| w               | float          | YES  |     | NULL    |       |
| h               | float          | YES  |     | NULL    |       |
| q               | int(11)        | YES  |     | NULL    |       |
| size            | int(11)        | YES  |     | -1      |       |
| score           | smallint(6)    | YES  |     | NULL    |       |
| thumb           | varbinary(128) | YES  | MUL |         |       |
| matched_at      | datetime       | YES  | MUL | NULL    |       |
| created_at      | datetime       | YES  |     | NULL    |       |
| updated_at      | datetime       | YES  |     | NULL    |       |
+-----------------+----------------+------+-----+---------+-------+

SELECT f.file_name, m.x, m.y, m.w, m.h, m.q, m.size from files f JOIN markers m ON f.file_uid = m.file_uid JOIN subjects s ON m.subj_uid = s.subj_uid WHERE s.subj_name = 'James' limit 100;

+-------------------------------------------------+-----------+-----------+-----------+-----------+------+------+
| file_name                                       | x         | y         | w         | h         | q    | size |
+-------------------------------------------------+-----------+-----------+-----------+-----------+------+------+
| photos/2008/Uni/2008-05-31_21.00.59.nef.jpg     |    0.3875 |  0.272727 |  0.180469 |  0.269231 |  103 |  231 |
| photos/2008/Uni/2008-05-31_21.01.00.nef.jpg     |  0.407031 |  0.278555 |  0.182031 |  0.271562 |  141 |  233 |
| photos/2008/Uni/2008-05-31_21.34.04.nef.jpg     |  0.226562 |  0.300699 | 0.0765625 |  0.114219 |   41 |   98 |
| photos/2008/Uni/2008-05-31_21.35.03.nef.jpg     |  0.301562 |  0.334499 |      0.05 | 0.0745921 |   14 |   64 |
| photos/2008/Uni/2008-05-31_22.00.59.jpg         |    0.3875 |  0.287048 |  0.166406 |  0.248541 |   84 |  213 |
| photos/2008/Uni/2008-05-31_22.01.00.jpg         |  0.403125 |  0.274212 |  0.184375 |  0.275379 |  136 |  236 |
| photos/2008/Uni/2008-05-31_22.34.04.jpg         |  0.225781 |  0.298716 | 0.0789063 |  0.117853 |   45 |  101 |
| photos/2008/Uni/2008-05-31_22.35.03.jpg         |  0.300781 |  0.331389 |  0.053125 | 0.0793466 |   17 |   68 |
| photos/2012/Uni/FB_IMG_13414850816804612.jpg    |  0.316406 |  0.225586 |  0.354167 |  0.265625 |  448 |  272 |
| photos/2012/Uni/FB_IMG_1341485106823772.jpg     |   0.30599 |  0.256836 |     0.375 |   0.28125 |  483 |  288 |
| photos/2012/Uni/IMG_20120705_112749.jpg         |  0.315104 |   0.21875 |   0.34375 |  0.257812 |  423 |  264 |
| photos/2012/Uni/IMG_20120705_112846.jpg         |  0.298177 |  0.207031 |  0.308594 |  0.231445 |  338 |  237 |
| photos/2014/Misc/IMG_20141005_135439.jpg        |  0.404687 |   0.23125 |  0.295312 |   0.39375 |  354 |  378 |
| photos/2014/Misc/IMG_20141005_135441.jpg        |  0.383594 |  0.222917 |  0.307031 |  0.409375 |  421 |  393 |
| photos/2014/Misc/IMG_20141005_135449.jpg        |  0.546875 |  0.158333 |  0.304688 |   0.40625 |  508 |  390 |
| photos/2014/Misc/IMG_20141005_135452.jpg        |    0.5625 |  0.240625 |  0.282031 |  0.376042 |  391 |  361 |
| photos/2014/Misc/IMG_20141005_135453.jpg        |  0.558594 |  0.265625 |  0.295312 |   0.39375 |  417 |  378 |
| photos/2014/Misc/IMG_20141005_135454.jpg        |  0.565625 |  0.270833 |  0.285937 |   0.38125 |  388 |  366 |
| photos/2014/Misc/IMG_20141005_135454_1.jpg      |  0.565625 |  0.261458 |  0.308594 |  0.411458 |  458 |  395 |
| photos/2014/Misc/IMG_20141005_135455.jpg        |  0.563281 |  0.270833 |  0.285937 |   0.38125 |  430 |  366 |
| photos/2014/Misc/IMG_20141005_135455_1.jpg      |  0.560156 |   0.26875 |  0.292969 |  0.390625 |  425 |  375 |
| photos/2014/Misc/IMG_20141007_113123.jpg        |  0.378906 |  0.253125 |    0.1375 |  0.183333 |   97 |  176 |
| photos/2014/Wales/IMG_20140710_115229.jpg       |  0.457031 |  0.347917 |   0.04375 | 0.0583333 |    8 |   56 |
| photos/2014/Wales/IMG_20140710_115231.jpg       |  0.492188 |  0.321875 | 0.0421875 |   0.05625 |    8 |   54 |
| photos/2015/Hungary/DSC00079.JPG                |   0.58125 |  0.395833 | 0.0546875 | 0.0729167 |   19 |   70 |
| photos/2015/Italy/DSC00122.JPG                  |  0.503906 |  0.210417 |  0.200781 |  0.267708 |  248 |  257 |
| photos/2015/Italy/DSC00123.JPG                  |  0.377344 |  0.246875 |  0.209375 |  0.279167 |  279 |  268 |
| photos/2015/Italy/DSC00161.JPG                  |  0.353125 |  0.305208 |    0.2125 |  0.283333 |  208 |  272 |
| photos/2015/Italy/DSC00162.JPG                  |  0.305469 |  0.303125 |  0.219531 |  0.292708 |  238 |  281 |
| photos/2015/Italy/SAM_2122.JPG                  |  0.128125 |  0.329167 |  0.121094 |  0.161458 |   79 |  155 |
| photos/2015/Italy/SAM_2123.JPG                  |   0.16875 |  0.334375 |  0.121094 |  0.161458 |   84 |  155 |
| photos/2015/Italy/SAM_2124.JPG                  |  0.167969 |  0.334375 |  0.117188 |   0.15625 |   75 |  150 |
| photos/2015/Italy/SAM_2125.JPG                  |  0.421094 |  0.409375 |  0.135937 |   0.18125 |  108 |  174 |
| photos/2015/Italy/SAM_2126.JPG                  |  0.429688 |  0.344792 |  0.128906 |  0.171875 |  100 |  165 |
| photos/2015/Italy/SAM_2130.JPG                  |    0.1125 |  0.444792 |  0.103906 |  0.138542 |   39 |  133 |
| photos/2015/Italy/SAM_2131.JPG                  |   0.11875 |  0.432292 |  0.101562 |  0.135417 |   33 |  130 |
| photos/2015/Italy/SAM_2133.JPG                  |  0.455469 |  0.165625 |  0.301562 |  0.402083 |  504 |  386 |
| photos/2015/Italy/SAM_2185.JPG                  |  0.572656 |  0.557292 |  0.065625 |    0.0875 |   13 |   84 |
| photos/2015/Italy/SAM_2191.JPG                  |  0.491406 |  0.246875 |  0.065625 |    0.0875 |   29 |   84 |
| photos/2015/Italy/SAM_2196.JPG                  |  0.471875 |  0.347917 | 0.0703125 |   0.09375 |   22 |   90 |
| photos/2015/Italy/SAM_2211.JPG                  |  0.589063 |  0.423958 | 0.0460938 | 0.0614583 |    9 |   59 |
| photos/2015/Italy/SAM_2212.JPG                  |   0.43125 |  0.264583 |  0.292969 |  0.390625 |  477 |  375 |
| photos/2015/Italy/SAM_2213.JPG                  |    0.5125 |  0.232292 |  0.289844 |  0.386458 |  436 |  371 |
| photos/2015/Italy/SAM_2214.JPG                  |  0.433594 |  0.216667 |     0.275 |  0.366667 |  413 |  352 |
| photos/2015/Italy/SAM_2219.JPG                  |  0.414844 |   0.16875 |  0.324219 |  0.432292 |  334 |  415 |
| photos/2015/Italy/SAM_2225.JPG                  |  0.260938 |  0.322917 |       0.1 |  0.133333 |   64 |  128 |
| photos/2015/Italy/SAM_2226.JPG                  |     0.125 |  0.307292 |  0.115625 |  0.154167 |   79 |  148 |
| photos/2015/Italy/SAM_2254.JPG                  |  0.285156 |   0.21875 |  0.146875 |  0.195833 |  129 |  188 |
| photos/2015/Italy/SAM_2256.JPG                  |     0.325 |      0.15 |  0.378906 |  0.505208 |  793 |  485 |
| photos/2015/Italy/SAM_2274.JPG                  |  0.417969 |  0.252083 |  0.217187 |  0.289583 |  283 |  278 |
| photos/2015/Italy/SAM_2301.JPG                  |  0.197656 |  0.173958 |  0.378125 |  0.504167 |  723 |  484 |
| photos/2015/Italy/SAM_2315.JPG                  |  0.478125 |  0.426042 | 0.0523437 | 0.0697917 |   16 |   67 |
| photos/2015/Italy/SAM_2316.JPG                  |  0.496875 |  0.440625 |   0.05625 |     0.075 |   19 |   72 |
| photos/2015/Italy/SAM_2317.JPG                  |  0.527344 |      0.35 |  0.059375 | 0.0791667 |   21 |   76 |
| photos/2015/Italy/SAM_2326.JPG                  |  0.191406 |  0.245833 |  0.296094 |  0.394792 |  439 |  379 |
| photos/2015/Italy/SAM_2327.JPG                  |  0.171875 |  0.195833 |   0.31875 |     0.425 |  564 |  408 |
| photos/2015/Italy/SAM_2328.JPG                  |  0.128125 |  0.139583 |  0.320312 |  0.427083 |  550 |  410 |
| photos/2015/Italy/SAM_2332.JPG                  |  0.634375 |  0.286458 |  0.259375 |  0.345833 |  198 |  332 |
| photos/2015/Italy/SAM_2335.JPG                  |  0.510938 |  0.286458 |  0.248437 |   0.33125 |  295 |  318 |
| photos/2015/Italy/SAM_2337.JPG                  |  0.722656 | 0.0447917 |  0.228125 |  0.304167 |  271 |  292 |
| photos/2015/Italy/SAM_2345.JPG                  |  0.455469 |  0.271875 |  0.303906 |  0.405208 |  341 |  389 |
| photos/2015/Italy/SAM_2349.JPG                  |  0.465625 |  0.216667 |  0.169531 |  0.226042 |  161 |  217 |
| photos/2015/Italy/SAM_2350.JPG                  |  0.442187 |  0.235417 |  0.147656 |  0.196875 |  126 |  189 |
| photos/2015/Italy/SAM_2351.JPG                  |  0.477344 |  0.229167 |  0.153125 |  0.204167 |  144 |  196 |
| photos/2015/Italy/SAM_2352.JPG                  |  0.442187 |  0.240625 |  0.173438 |   0.23125 |  178 |  222 |
| photos/2015/Italy/SAM_2360.JPG                  |  0.448438 |  0.361458 |  0.090625 |  0.120833 |   57 |  116 |
| photos/2015/Italy/SAM_2361.JPG                  |  0.476562 |   0.31875 | 0.0570313 | 0.0760417 |   21 |   73 |
| photos/2015/Italy/SAM_2363.JPG                  |     0.375 |  0.320833 |  0.214844 |  0.286458 |  304 |  275 |
| photos/2015/Italy/SAM_2377.JPG                  |  0.473437 |  0.438542 | 0.0601562 | 0.0802083 |   21 |   77 |
| photos/2015/Italy/SAM_2379.JPG                  |  0.451562 |    0.4125 |    0.0625 | 0.0833333 |   24 |   80 |
| photos/2015/Italy/SAM_2389.JPG                  |  0.521875 |    0.2875 |   0.23125 |  0.308333 |  303 |  296 |
| photos/2016/Bath/IMG_20161005_103024282.jpg     |  0.350694 |  0.230469 |  0.597222 |  0.335938 |  569 |  344 |
| photos/2016/Bath/IMG_20161005_103032226.jpg     |  0.197917 |  0.275391 |  0.409722 |  0.230469 |  268 |  236 |
| photos/2016/Bath/IMG_20161005_103035430.jpg     |  0.234375 |  0.432617 |  0.371528 |  0.208984 |  275 |  214 |
| photos/2016/Bath/IMG_20161005_103035430_TOP.jpg |  0.201389 |  0.396484 |  0.434028 |  0.244141 |  319 |  250 |
| photos/2016/Bath/IMG_20161005_103037146_HDR.jpg |  0.197917 |  0.361328 |   0.46875 |  0.263672 |  426 |  270 |
| photos/2016/Bath/IMG_20161005_114940427_HDR.jpg |  0.237847 |  0.302734 |  0.659722 |  0.371094 |  695 |  380 |
| photos/2016/Bath/IMG_20161005_115006318_TOP.jpg |  0.364583 |  0.295898 |  0.421875 |  0.237305 |  254 |  243 |
| photos/2016/Bath/IMG_20161005_115009527.jpg     |  0.373264 |  0.347656 |  0.427083 |  0.240234 |  284 |  246 |
| photos/2016/Bath/IMG_20161005_115009527_TOP.jpg |  0.401042 |  0.348633 |  0.404514 |  0.227539 |  272 |  233 |
| photos/2016/Bath/IMG_20161005_115015656.jpg     |  0.369792 |  0.360352 |  0.401042 |  0.225586 |  298 |  231 |
| photos/2016/Bath/IMG_20161005_115017808.jpg     |  0.418403 |  0.371094 |  0.357639 |  0.201172 |  231 |  206 |
| photos/2016/Bath/IMG_20161005_115017808_TOP.jpg |  0.413194 |  0.351562 |  0.421875 |  0.237305 |  262 |  243 |
| photos/2016/Bath/IMG_20161005_115020074_HDR.jpg |  0.414931 |  0.334961 |  0.425347 |  0.239258 |  288 |  245 |
| photos/2016/Cuba/DSC_0069.NEF.jpg               |  0.347656 |  0.226107 |  0.264844 |  0.395105 |  426 |  339 |
| photos/2016/Cuba/DSC_0070.NEF.jpg               |  0.371094 |   0.22028 |  0.230469 |  0.343823 |  321 |  295 |
| photos/2016/Cuba/DSC_0071.NEF.jpg               |  0.373437 |  0.223776 |  0.232812 |  0.347319 |  332 |  298 |
| photos/2016/Cuba/DSC_0072.NEF.jpg               |  0.378125 |  0.203963 |  0.238281 |  0.355478 |  366 |  305 |
| photos/2016/Cuba/IMG_20160610_142053059.jpg     |  0.302083 |  0.158203 |  0.392361 |  0.220703 |  434 |  226 |
| photos/2016/Cuba/IMG_20160610_190625104.jpg     |  0.133681 |  0.138672 |  0.677083 |  0.380859 | 1274 |  390 |
| photos/2016/Cuba/IMG_20160610_190627436.jpg     |  0.102431 |  0.102539 |  0.703125 |  0.395508 | 1396 |  405 |
| photos/2016/Cuba/IMG_20160610_190630065.jpg     |  0.133681 | 0.0322266 |  0.730903 |  0.411133 | 1516 |  421 |
| photos/2016/Cuba/IMG_20160610_190633997.jpg     | 0.0538194 | 0.0488281 |  0.743056 |  0.417969 | 1540 |  428 |
| photos/2016/Cuba/IMG_20160610_190635277.jpg     | 0.0711806 | 0.0742188 |  0.696181 |  0.391602 | 1358 |  401 |
| photos/2016/Cuba/IMG_20160610_202900463.jpg     |   0.21875 |  0.137695 |  0.532986 |  0.299805 |  702 |  307 |
| photos/2016/Cuba/SAM_2423.JPG                   |  0.403125 |  0.398958 |  0.046875 |    0.0625 |   10 |   60 |
| photos/2016/Cuba/SAM_2425.JPG                   |  0.417188 |  0.377083 | 0.0460938 | 0.0614583 |   13 |   59 |
| photos/2016/Cuba/SAM_2427.JPG                   |  0.455469 |       0.3 | 0.0429688 | 0.0572917 |    9 |   55 |
| photos/2016/Cuba/SAM_2440.JPG                   |  0.265625 |   0.25625 | 0.0882813 |  0.117708 |   50 |  113 |
| photos/2016/Cuba/SAM_2441.JPG                   |  0.272656 |  0.284375 | 0.0820312 |  0.109375 |   43 |  105 |
+-------------------------------------------------+-----------+-----------+-----------+-----------+------+------+


What are these floats?


Let's try and exact a sub-image of my face from these details


| file_name                                     | x         | y         | w         | h         | q    | size |
photos/2016/Cuba/SAM_2423.JPG                   |  0.403125 |  0.398958 |  0.046875 |    0.0625 |   10 |   60 |

Going to guess that means 40.3% of the way over the image

Looking for CLI for image manipulation -> [imageMagik](https://imagemagick.org)

convert SAM_2423.JPG -set page "-%[fx:w*0.403125]-%[fx:h*0.398958]" -crop 4.6875%x6.25%+0+0 output.jpg